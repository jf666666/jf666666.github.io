<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>硬解 on ziFeng&#39;s Blog</title>
        <link>http://localhost:1313/tags/%E7%A1%AC%E8%A7%A3/</link>
        <description>Recent content in 硬解 on ziFeng&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Tue, 23 Jan 2024 10:31:42 +0800</lastBuildDate><atom:link href="http://localhost:1313/tags/%E7%A1%AC%E8%A7%A3/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>ESXi 直通核显开启硬解，Emby 配合 CloudDrive2 挂载云盘打造家用的流媒体</title>
        <link>http://localhost:1313/p/2024/01/emby-clouddrive2/</link>
        <pubDate>Tue, 23 Jan 2024 10:31:42 +0800</pubDate>
        
        <guid>http://localhost:1313/p/2024/01/emby-clouddrive2/</guid>
        <description>&lt;img src="http://localhost:1313/p/2024/01/emby-clouddrive2/cover.jpg" alt="Featured image of post ESXi 直通核显开启硬解，Emby 配合 CloudDrive2 挂载云盘打造家用的流媒体" /&gt;&lt;p&gt;🔥🔥🔥：稳定好用的机场/梯子 &lt;a class=&#34;link&#34; href=&#34;https://tagss04.pro/#/auth/2neqgxFl&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;TAG 全球250+节点、99+流媒体解锁&lt;/a&gt;，更多参考&lt;a class=&#34;link&#34; href=&#34;https://alecthw.github.io/p/2023/11/airport-recommend/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机场推荐&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;👉 注册 CloudDrive2 的时候可以填上我的推荐码哦：&lt;code&gt;cAR6b415&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;核心点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用 CloudDrive2 把云盘挂载到本地。&lt;/li&gt;
&lt;li&gt;新款 CPU 如果没有硬解选项，就安装 beta 版的 emby。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;PS：以下使用的ESXi 8.0，基于 Ubuntu 22.04 LTS，在 root 用户下操作。需要有简单的 Linux 基础知识，例如了解 SSH、VIM 怎么使用。&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PS：CloudDrive2 和 Emby 的都是从 Github 下载的，连不上 Github 自行科学上网。&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;esxi-核显直通&#34;&gt;
    &lt;a href=&#34;#esxi-%e6%a0%b8%e6%98%be%e7%9b%b4%e9%80%9a&#34;&gt;#&lt;/a&gt;
    ESXi 核显直通
&lt;/h2&gt;&lt;p&gt;务必先创建好虚拟机，并配置好静态 IP 地址和 SSH！！！&lt;/p&gt;
&lt;p&gt;直通并添加核显到虚拟机之后，ESXi网页中，虚拟机的控制台将什么也不显示了。如果没有配置 IP 和 SSH，只能要么把虚拟机核显删掉，要么机器直接连显示器。&lt;/p&gt;
&lt;h3 id=&#34;1-打开-esxi-ssh&#34;&gt;
    &lt;a href=&#34;#1-%e6%89%93%e5%bc%80-esxi-ssh&#34;&gt;#&lt;/a&gt;
    1. 打开 ESXi SSH
&lt;/h3&gt;&lt;p&gt;如图所示操作。开启完使用工具登录，例如 Putty、XShell 等。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/esxi-ssh.jpg&#34;
	width=&#34;1507&#34;
	height=&#34;791&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/esxi-ssh_hu8ca9391088724b043d132b0bff4a4f9f_106808_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/esxi-ssh_hu8ca9391088724b043d132b0bff4a4f9f_106808_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ESXi 开启 SSH&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;190&#34;
		data-flex-basis=&#34;457px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;2-禁用-esxi-显卡调用&#34;&gt;
    &lt;a href=&#34;#2-%e7%a6%81%e7%94%a8-esxi-%e6%98%be%e5%8d%a1%e8%b0%83%e7%94%a8&#34;&gt;#&lt;/a&gt;
    2. 禁用 ESXi 显卡调用
&lt;/h3&gt;&lt;p&gt;禁用后，机器连接显示器将不显示黄黑色控制台。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 禁用&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;esxcli system settings kernel &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; -s vga -v FALSE
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 查看配置结果&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;esxcli system settings kernel list -o &lt;span class=&#34;s2&#34;&gt;&amp;#34;vga&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;查出的结果如下，&lt;code&gt;Configured&lt;/code&gt; 显示 &lt;code&gt;FALSE&lt;/code&gt; 即成功，等一会儿重启后 &lt;code&gt;Runtime&lt;/code&gt; 会变成 &lt;code&gt;FALSE&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Name  Type  Configured  Runtime  Default  Description
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;----  ----  ----------  -------  -------  -----------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vga   Bool  FALSE       TRUE     TRUE     Enable/Disable VGA support.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;3-passthrumap-增加核显&#34;&gt;
    &lt;a href=&#34;#3-passthrumap-%e5%a2%9e%e5%8a%a0%e6%a0%b8%e6%98%be&#34;&gt;#&lt;/a&gt;
    3. passthru.map 增加核显
&lt;/h3&gt;&lt;p&gt;查看核显设备ID&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 禁用&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lspci -v &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep -A &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; VGA
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;返回的信息如下，关注下第二行。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0000:00:02.0 Display controller VGA compatible controller: Intel Corporation Alder Lake-S GT1 [UHD Graphics 770] 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	 Class 0300: 8086:5916
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;8086&lt;/code&gt; 是供应商 ID，这里就是 Intel，&lt;code&gt;5916&lt;/code&gt; 就是硬件 ID。记下这8个字符，这里不要照抄哦，要用你自己的。&lt;/p&gt;
&lt;p&gt;用 vi 修改 &lt;code&gt;passthru.map&lt;/code&gt;，在最后添加&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Intel VGA
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;8086  5916  d3d0     default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;保存，重启ESXi主机。&lt;/p&gt;
&lt;h3 id=&#34;4-切换显卡直通&#34;&gt;
    &lt;a href=&#34;#4-%e5%88%87%e6%8d%a2%e6%98%be%e5%8d%a1%e7%9b%b4%e9%80%9a&#34;&gt;#&lt;/a&gt;
    4. 切换显卡直通
&lt;/h3&gt;&lt;p&gt;ESXi Web 控制台下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/uhd-direct.jpg&#34;
	width=&#34;2417&#34;
	height=&#34;550&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/uhd-direct_hu07073ae92868ec3762924452e99f8d52_129457_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/uhd-direct_hu07073ae92868ec3762924452e99f8d52_129457_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;切换显卡直通&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;439&#34;
		data-flex-basis=&#34;1054px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;切换成功后，直通显示为 &lt;code&gt;活动&lt;/code&gt;。ESXi 7.x 和 ESXi 8.x 是不需要重启主机的，ESXi 6.7 可能还需要重启一次。&lt;/p&gt;
&lt;h3 id=&#34;5-虚拟机添加核显&#34;&gt;
    &lt;a href=&#34;#5-%e8%99%9a%e6%8b%9f%e6%9c%ba%e6%b7%bb%e5%8a%a0%e6%a0%b8%e6%98%be&#34;&gt;#&lt;/a&gt;
    5. 虚拟机添加核显
&lt;/h3&gt;&lt;p&gt;创建虚拟机的步骤不再赘述。&lt;/p&gt;
&lt;p&gt;编辑虚拟机&lt;/p&gt;
&lt;p&gt;禁用 CPU 下虚拟化相关的三个配置&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/disable-cpu-cfg.jpg&#34;
	width=&#34;1399&#34;
	height=&#34;878&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/disable-cpu-cfg_huc5e989ab4e8715a56ad9ef7dd40c7909_90228_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/disable-cpu-cfg_huc5e989ab4e8715a56ad9ef7dd40c7909_90228_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;禁用 CPU 下虚拟化相关的三个配置&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;382px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;内存下，勾选 &lt;code&gt;预留所有客户机内存&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/keep-mem.jpg&#34;
	width=&#34;1399&#34;
	height=&#34;777&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/keep-mem_huc5e989ab4e8715a56ad9ef7dd40c7909_78086_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/keep-mem_huc5e989ab4e8715a56ad9ef7dd40c7909_78086_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;禁用 CPU 下虚拟化相关的三个配置&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;180&#34;
		data-flex-basis=&#34;432px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;添加 PCI 设备&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/add-pci.jpg&#34;
	width=&#34;1399&#34;
	height=&#34;748&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/add-pci_huc5e989ab4e8715a56ad9ef7dd40c7909_81923_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/add-pci_huc5e989ab4e8715a56ad9ef7dd40c7909_81923_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;添加 PCI 设备&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;PCI设备1&lt;/code&gt;中，选择你的核显。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/select-uhd.jpg&#34;
	width=&#34;1399&#34;
	height=&#34;803&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/select-uhd_huc5e989ab4e8715a56ad9ef7dd40c7909_87727_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/select-uhd_huc5e989ab4e8715a56ad9ef7dd40c7909_87727_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;PCI 选择核显&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;174&#34;
		data-flex-basis=&#34;418px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;保存，启动虚拟机。这一次启动可能会比较慢，耐心等待，直到 SSH 可以连接上虚拟机。&lt;/p&gt;
&lt;h2 id=&#34;安装配置-clouddrive2&#34;&gt;
    &lt;a href=&#34;#%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%ae-clouddrive2&#34;&gt;#&lt;/a&gt;
    安装配置 CloudDrive2
&lt;/h2&gt;&lt;p&gt;后续虚拟机上，都是在 &lt;code&gt;root&lt;/code&gt; 用户下操作的。&lt;/p&gt;
&lt;h3 id=&#34;1-虚拟机前置配置&#34;&gt;
    &lt;a href=&#34;#1-%e8%99%9a%e6%8b%9f%e6%9c%ba%e5%89%8d%e7%bd%ae%e9%85%8d%e7%bd%ae&#34;&gt;#&lt;/a&gt;
    1. 虚拟机前置配置
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 切换到 root 用户&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo su
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 安装 vim&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt install -y vim
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 禁用防火墙&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl stop ufw
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl disable ufw
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;2-安装&#34;&gt;
    &lt;a href=&#34;#2-%e5%ae%89%e8%a3%85&#34;&gt;#&lt;/a&gt;
    2. 安装
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.clouddrive2.com/download.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CloudDrive2 官网&lt;/a&gt;下载 Linux 版本，使用 SFTP 客户端，上传到虚拟机的 &lt;code&gt;/opt&lt;/code&gt; 目录下。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 进入 /opt 目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 创建一个新目录，给后续挂载云盘用&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir /opt/mnt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 解压&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar xzf clouddrive-2-linux-x86_64-*.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 更名&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv clouddrive-2-linux-x86_64-* clouddrive2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;3-创建-systemd-service&#34;&gt;
    &lt;a href=&#34;#3-%e5%88%9b%e5%bb%ba-systemd-service&#34;&gt;#&lt;/a&gt;
    3. 创建 systemd service
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /lib/systemd/system/clouddrive2.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;填入以下内容&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Unit]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Description=clouddrive2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ConditionFileIsExecutable=/opt/clouddrive2/clouddrive
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;After=network.target
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Wants=network.target
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Service]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Type=simple
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PIDFile=/var/run/clouddrive2.pid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ExecStart=/opt/clouddrive2/clouddrive
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;WorkingDirectory=/opt/clouddrive2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Restart=on-failure
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Install]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;WantedBy=multi-user.target
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;4-启动-clouddrive2&#34;&gt;
    &lt;a href=&#34;#4-%e5%90%af%e5%8a%a8-clouddrive2&#34;&gt;#&lt;/a&gt;
    4. 启动 CloudDrive2
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; clouddrive2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl start clouddrive2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;5-网页登陆配置&#34;&gt;
    &lt;a href=&#34;#5-%e7%bd%91%e9%a1%b5%e7%99%bb%e9%99%86%e9%85%8d%e7%bd%ae&#34;&gt;#&lt;/a&gt;
    5. 网页登陆配置
&lt;/h3&gt;&lt;p&gt;http://ip:19798/&lt;/p&gt;
&lt;p&gt;注册登录后界面如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/clouddrive2.jpg&#34;
	width=&#34;2324&#34;
	height=&#34;802&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/clouddrive2_hu5c714e24418f2fed05fee2217a34ace5_127891_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/clouddrive2_hu5c714e24418f2fed05fee2217a34ace5_127891_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;CloudDrive2 界面&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;289&#34;
		data-flex-basis=&#34;695px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;点击云图标添加网盘，登录授权。&lt;/p&gt;
&lt;p&gt;CloudDrive2 免费版功能有限制，一般情况下个人用户足够使用。具体可参考下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/clouddrive2-vip.jpg&#34;
	width=&#34;1665&#34;
	height=&#34;993&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/clouddrive2-vip_hu96ba24cb6a99b84dbc58759519c83822_188094_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/clouddrive2-vip_hu96ba24cb6a99b84dbc58759519c83822_188094_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;CloudDrive2 VIP 价格&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;167&#34;
		data-flex-basis=&#34;402px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;6-挂载网盘到本地&#34;&gt;
    &lt;a href=&#34;#6-%e6%8c%82%e8%bd%bd%e7%bd%91%e7%9b%98%e5%88%b0%e6%9c%ac%e5%9c%b0&#34;&gt;#&lt;/a&gt;
    6. 挂载网盘到本地
&lt;/h3&gt;&lt;p&gt;左树选择一个网盘（也可以选择子目录），然后点击 &lt;code&gt;电脑&lt;/code&gt;图标，开始挂载，界面如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/mount.jpg&#34;
	width=&#34;2324&#34;
	height=&#34;1437&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/mount_hu4a278dbb29f5e97333bb0cc50759d29a_180608_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/mount_hu4a278dbb29f5e97333bb0cc50759d29a_180608_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;CloudDrive2 挂载&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;161&#34;
		data-flex-basis=&#34;388px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;如果默认的名称为中文，建议改成 &lt;code&gt;英文/数字&lt;/code&gt;，这个名称就是挂载后，Linux 本地的文件夹名称。&lt;/p&gt;
&lt;p&gt;点击 &lt;code&gt;选择&lt;/code&gt;，选择挂载点，这里选择之前创建的 &lt;code&gt;/opt/mnt&lt;/code&gt; 目录&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/mount-dir.jpg&#34;
	width=&#34;1996&#34;
	height=&#34;1161&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/mount-dir_huf8763d6a8ee80c80cdce66f9e43cbd72_106238_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/mount-dir_huf8763d6a8ee80c80cdce66f9e43cbd72_106238_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;CloudDrive2 挂载目录选择&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;171&#34;
		data-flex-basis=&#34;412px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;挂载成功后，命令行看一下虚拟机的目录，这里我挂载了 aliyun 和 115。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@ubuntu-emby:~# ls /opt/mnt/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;115&lt;/span&gt;  aliyun
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;安装配置-emby-server&#34;&gt;
    &lt;a href=&#34;#%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%ae-emby-server&#34;&gt;#&lt;/a&gt;
    安装配置 Emby-Server
&lt;/h2&gt;&lt;p&gt;注意：较新的CPU，建议下载 Beta 版本，否则硬解无法选择 &lt;code&gt;QuickSync&lt;/code&gt;。或者先安装标准版，发现硬解无法选择 &lt;code&gt;QuickSync&lt;/code&gt;，再覆盖安装 Beta 版。&lt;/p&gt;
&lt;h3 id=&#34;1-安装&#34;&gt;
    &lt;a href=&#34;#1-%e5%ae%89%e8%a3%85&#34;&gt;#&lt;/a&gt;
    1. 安装
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://emby.media/linux-server.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Emby 官网下载&lt;/a&gt; ubuntu 版本的 deb 包。&lt;/p&gt;
&lt;p&gt;安装&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dpkg -i emby-server-deb_*_amd64.deb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;安装后已经自动启用了，可以再执行一遍以下命令，防止开机自启没开启。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; emby-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;查看运行状态&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl status emby-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;2-启动顺序&#34;&gt;
    &lt;a href=&#34;#2-%e5%90%af%e5%8a%a8%e9%a1%ba%e5%ba%8f&#34;&gt;#&lt;/a&gt;
    2. 启动顺序
&lt;/h3&gt;&lt;p&gt;由于使用了 CloudDrive2 挂载云盘，期望的是 CloudDrive2 要在 Emby 之前启动，才能保证 Emby 正常读取到网盘内容，避免报错。&lt;/p&gt;
&lt;p&gt;编辑 emby 的 service 文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /lib/systemd/system/emby-server.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在 &lt;code&gt;After=network.target&lt;/code&gt; 后面，均添加 &lt;code&gt;clouddrive2.service&lt;/code&gt;，然后再添加一行 &lt;code&gt;Wants=network.target clouddrive2.service&lt;/code&gt;，如下&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Unit]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Description=Emby Server is a personal media server with apps on just about every device
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;After=network.target clouddrive2.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Wants=network.target clouddrive2.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;·····
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;重载并重启&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart emby-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;注意，升级安装 emby 后，这个 service 会被覆盖成默认的，需要再次修改。&lt;/p&gt;
&lt;h3 id=&#34;3-配置-emby&#34;&gt;
    &lt;a href=&#34;#3-%e9%85%8d%e7%bd%ae-emby&#34;&gt;#&lt;/a&gt;
    3. 配置 Emby
&lt;/h3&gt;&lt;p&gt;http://ip:8096/&lt;/p&gt;
&lt;p&gt;登录后按照指引配置就行了，这里网上教程很多，不赘述。&lt;/p&gt;
&lt;p&gt;创建媒体库的时候，文件夹选择通过 CloudDrive2 挂载到本地的文件夹即可。例如：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/emby-dir.jpg&#34;
	width=&#34;1442&#34;
	height=&#34;689&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/emby-dir_hu8c1833b9b1503685a3bb57ddbbe260ca_66617_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/emby-dir_hu8c1833b9b1503685a3bb57ddbbe260ca_66617_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Emby 媒体库目录&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;209&#34;
		data-flex-basis=&#34;502px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;4-emby-硬解&#34;&gt;
    &lt;a href=&#34;#4-emby-%e7%a1%ac%e8%a7%a3&#34;&gt;#&lt;/a&gt;
    4. Emby 硬解
&lt;/h3&gt;&lt;p&gt;如下图，勾选 &lt;code&gt;QuickSync&lt;/code&gt;，调整顺序即可。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/emby-hd.jpg&#34;
	width=&#34;2268&#34;
	height=&#34;1425&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/emby-clouddrive2/emby-hd_hu5065565cd01aac49b57d00acafd6dca7_200883_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/emby-clouddrive2/emby-hd_hu5065565cd01aac49b57d00acafd6dca7_200883_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Emby 硬解&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;然后，随便找个视频测试下转码，调整码率，拖拉快进等。&lt;/p&gt;
&lt;h3 id=&#34;5-电视直播-m3u&#34;&gt;
    &lt;a href=&#34;#5-%e7%94%b5%e8%a7%86%e7%9b%b4%e6%92%ad-m3u&#34;&gt;#&lt;/a&gt;
    5. 电视直播 m3u
&lt;/h3&gt;&lt;p&gt;目前好用的直播源都是 ipv6 的，如果正确配置了 ipv6，可以添加如下直播源和指南数据库。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直播源：https://live.fanmingming.com/tv/m3u/ipv6.m3u&lt;/li&gt;
&lt;li&gt;XmlTV：https://live.fanmingming.com/e.xml&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
