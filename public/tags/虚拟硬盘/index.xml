<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>虚拟硬盘 on ziFeng&#39;s Blog</title>
        <link>http://localhost:1313/tags/%E8%99%9A%E6%8B%9F%E7%A1%AC%E7%9B%98/</link>
        <description>Recent content in 虚拟硬盘 on ziFeng&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sun, 14 Jan 2024 17:57:22 +0800</lastBuildDate><atom:link href="http://localhost:1313/tags/%E8%99%9A%E6%8B%9F%E7%A1%AC%E7%9B%98/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>在 Hyper-V 中体验 陆大大的云固件 &amp; 使用 WinNTSetup 制作 L0 镜像</title>
        <link>http://localhost:1313/p/2024/01/cloud-firmware-hyperv/</link>
        <pubDate>Sun, 14 Jan 2024 17:57:22 +0800</pubDate>
        
        <guid>http://localhost:1313/p/2024/01/cloud-firmware-hyperv/</guid>
        <description>&lt;img src="http://localhost:1313/p/2024/01/cloud-firmware-hyperv/cover.png" alt="Featured image of post 在 Hyper-V 中体验 陆大大的云固件 &amp; 使用 WinNTSetup 制作 L0 镜像" /&gt;&lt;p&gt;🔥🔥🔥：稳定好用的机场/梯子 &lt;a class=&#34;link&#34; href=&#34;https://tagss04.pro/#/auth/2neqgxFl&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;TAG 全球250+节点、99+流媒体解锁&lt;/a&gt;，更多参考&lt;a class=&#34;link&#34; href=&#34;https://alecthw.github.io/p/2023/11/airport-recommend/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;机场推荐&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;关于云固件相关的资料，请参考 &lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/651550564&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;陆伟峰​的知乎&lt;/a&gt;，这里不再赘述。&lt;/p&gt;
&lt;p&gt;过程是其实和硬件硬盘是一样的，这里只不过是用同样的方式创建虚拟磁盘，然后在 Hyper-V 中启动。&lt;/p&gt;
&lt;h2 id=&#34;云固件文件准备&#34;&gt;
    &lt;a href=&#34;#%e4%ba%91%e5%9b%ba%e4%bb%b6%e6%96%87%e4%bb%b6%e5%87%86%e5%a4%87&#34;&gt;#&lt;/a&gt;
    云固件文件准备
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;云固件：&lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/share/init?surl=E3LKPlyAZCUX8PhIkIu98Q&amp;amp;pwd=7217&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;r23942（v1.6.23942）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Win11 L1 镜像：&lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/1qpRqRhTlG5PTk0EfspJomw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Windows 11 专业版 L1基本安装镜像&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;软件准备&#34;&gt;
    &lt;a href=&#34;#%e8%bd%af%e4%bb%b6%e5%87%86%e5%a4%87&#34;&gt;#&lt;/a&gt;
    软件准备
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.diskgenius.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DiskGenius&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;开始制作&#34;&gt;
    &lt;a href=&#34;#%e5%bc%80%e5%a7%8b%e5%88%b6%e4%bd%9c&#34;&gt;#&lt;/a&gt;
    开始制作
&lt;/h2&gt;&lt;p&gt;整体还是比较简单的，先创建 vdhx 虚拟磁盘，然后用 DiskGenius 分区，最后然后再把 Win11 L1 镜像拷贝到 创建的 vhdx 中，配置启动镜像即可。&lt;/p&gt;
&lt;h3 id=&#34;创建-vdhx&#34;&gt;
    &lt;a href=&#34;#%e5%88%9b%e5%bb%ba-vdhx&#34;&gt;#&lt;/a&gt;
    创建 vdhx
&lt;/h3&gt;&lt;p&gt;为了简单，这里给出使用磁盘管理图形界面的创建步骤。&lt;/p&gt;
&lt;p&gt;首先打开&lt;code&gt;计算机管理&lt;/code&gt;，然后点击左边的&lt;code&gt;磁盘管理&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/pc_mgr.jpg&#34;
	width=&#34;555&#34;
	height=&#34;440&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/pc_mgr_hu80dde58c56a01f2b9e63c575b914c585_34209_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/pc_mgr_hu80dde58c56a01f2b9e63c575b914c585_34209_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;计算机管理&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;126&#34;
		data-flex-basis=&#34;302px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;右键，点击&lt;code&gt;创建VHD&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vhdx_1.jpg&#34;
	width=&#34;1232&#34;
	height=&#34;571&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vhdx_1_hub9bb621fea29ad0b67adda02284bf224_89263_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vhdx_1_hub9bb621fea29ad0b67adda02284bf224_89263_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建虚拟磁盘&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;215&#34;
		data-flex-basis=&#34;517px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;按下图输入大写和选择，注意大小要大于 &lt;code&gt;260G&lt;/code&gt;，具体原因参考陆大的文章。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vhdx_2.jpg&#34;
	width=&#34;551&#34;
	height=&#34;672&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vhdx_2_hud62e294207f868a5062d20b8a1190b39_50457_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vhdx_2_hud62e294207f868a5062d20b8a1190b39_50457_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建虚拟磁盘2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;81&#34;
		data-flex-basis=&#34;196px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;创建之后会自动挂载。&lt;/p&gt;
&lt;h3 id=&#34;分区&#34;&gt;
    &lt;a href=&#34;#%e5%88%86%e5%8c%ba&#34;&gt;#&lt;/a&gt;
    分区
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;注意：操作千万小心，不要错选磁盘，认证核对，避免数据丢失，数据无价！！！
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;注意：操作千万小心，不要错选磁盘，认证核对，避免数据丢失，数据无价！！！
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;注意：操作千万小心，不要错选磁盘，认证核对，避免数据丢失，数据无价！！！
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;打开 &lt;code&gt;DiskGenius&lt;/code&gt;，选中刚刚创建的虚拟磁盘，然后点击&lt;code&gt;快速分区&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/partition.jpg&#34;
	width=&#34;1519&#34;
	height=&#34;519&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/partition_hu368acb043ac6b16aa29c3f6c9e9caf9a_142197_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/partition_hu368acb043ac6b16aa29c3f6c9e9caf9a_142197_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;分区&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;292&#34;
		data-flex-basis=&#34;702px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;按下图选择，卷标输入 &lt;code&gt;VDs&lt;/code&gt;，点击&lt;code&gt;确定&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/partition2.jpg&#34;
	width=&#34;835&#34;
	height=&#34;647&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/partition2_hu0e8e96c2f9c60bfeada1c97b064f3ebb_87279_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/partition2_hu0e8e96c2f9c60bfeada1c97b064f3ebb_87279_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;分区2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;129&#34;
		data-flex-basis=&#34;309px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;执行成功和，&lt;code&gt;VDs&lt;/code&gt; 应该被自动分配盘符挂载到系统了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/my_pc.jpg&#34;
	width=&#34;1047&#34;
	height=&#34;185&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/my_pc_hu932f4e4e3678195d1bcd5d3d566b3cff_28772_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/my_pc_hu932f4e4e3678195d1bcd5d3d566b3cff_28772_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;资源管理器&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;565&#34;
		data-flex-basis=&#34;1358px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;还需要把 &lt;code&gt;ESP&lt;/code&gt; 分区也挂载到系统，只能在 DiskGenius 中操作。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/esp.jpg&#34;
	width=&#34;417&#34;
	height=&#34;578&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/esp_hu17b20f3809038c0aac8a67499e623534_57676_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/esp_hu17b20f3809038c0aac8a67499e623534_57676_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;挂载ESP分区&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;72&#34;
		data-flex-basis=&#34;173px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/my_pc2.jpg&#34;
	width=&#34;992&#34;
	height=&#34;167&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/my_pc2_hu64b2c6c6390ef77369749582d0f5829c_33729_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/my_pc2_hu64b2c6c6390ef77369749582d0f5829c_33729_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;资源管理器2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;594&#34;
		data-flex-basis=&#34;1425px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;复制文件&#34;&gt;
    &lt;a href=&#34;#%e5%a4%8d%e5%88%b6%e6%96%87%e4%bb%b6&#34;&gt;#&lt;/a&gt;
    复制文件
&lt;/h3&gt;&lt;p&gt;将云固件解压到 &lt;code&gt;ESP&lt;/code&gt; 分区，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_cd.jpg&#34;
	width=&#34;835&#34;
	height=&#34;293&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_cd_hu1124fc6110259e5ac6f193571cb216b3_26501_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_cd_hu1124fc6110259e5ac6f193571cb216b3_26501_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;云固件解压&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;284&#34;
		data-flex-basis=&#34;683px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;将云固件中的 &lt;code&gt;vd.config&lt;/code&gt; 拷贝到 &lt;code&gt;VDs&lt;/code&gt; 分区中。&lt;/p&gt;
&lt;p&gt;再将下载的 &lt;code&gt;Windows 11 专业版 L1基本安装镜像&lt;/code&gt;，目录 &lt;code&gt;b1882792&lt;/code&gt; 中的 &lt;code&gt;Windows11-22H2-Pro-L1.7z&lt;/code&gt; 文件解压，解压后删除原文件 &lt;code&gt;Windows11-22H2-Pro-L1.7z&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;然后将目录 &lt;code&gt;b1882792&lt;/code&gt; 拷贝到 &lt;code&gt;VDs&lt;/code&gt; 分区中。目录结构如下。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_vd.jpg&#34;
	width=&#34;796&#34;
	height=&#34;292&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_vd_hub4efdea33567a702759b18c1a1818ee6_24889_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_vd_hub4efdea33567a702759b18c1a1818ee6_24889_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;镜像解压&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;272&#34;
		data-flex-basis=&#34;654px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_vd_2.jpg&#34;
	width=&#34;844&#34;
	height=&#34;360&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_vd_2_hua45c9aafae8837dad693037d13573ac2_36327_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unzip_vd_2_hua45c9aafae8837dad693037d13573ac2_36327_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;镜像解压2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;234&#34;
		data-flex-basis=&#34;562px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;分离vhd&#34;&gt;
    &lt;a href=&#34;#%e5%88%86%e7%a6%bbvhd&#34;&gt;#&lt;/a&gt;
    分离VHD
&lt;/h3&gt;&lt;p&gt;（可选）在 &lt;code&gt;DiskGenius&lt;/code&gt; 中删除 &lt;code&gt;ESP&lt;/code&gt; 分区的盘符。&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;磁盘管理&lt;/code&gt;中，右键虚拟磁盘，点击&lt;code&gt;分离VHD&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unmount_vhdx.jpg&#34;
	width=&#34;767&#34;
	height=&#34;235&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unmount_vhdx_hu5171d03e1e5d35808ec0dad9fe98c879_22019_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/unmount_vhdx_hu5171d03e1e5d35808ec0dad9fe98c879_22019_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;分离VHD&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;326&#34;
		data-flex-basis=&#34;783px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;至此，Hypver-V 上的云固件虚拟盘就做好了。&lt;/p&gt;
&lt;h2 id=&#34;在-hyper-v-中创建虚拟机&#34;&gt;
    &lt;a href=&#34;#%e5%9c%a8-hyper-v-%e4%b8%ad%e5%88%9b%e5%bb%ba%e8%99%9a%e6%8b%9f%e6%9c%ba&#34;&gt;#&lt;/a&gt;
    在 Hyper-V 中创建虚拟机
&lt;/h2&gt;&lt;p&gt;按如下步骤创建，选择&lt;code&gt;第二代&lt;/code&gt;，虚拟磁盘选择&lt;code&gt;使用现有&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_1.jpg&#34;
	width=&#34;980&#34;
	height=&#34;413&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_1_hu5207a37ecf57f6d53a87610985ecd525_53852_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_1_hu5207a37ecf57f6d53a87610985ecd525_53852_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建VM1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;237&#34;
		data-flex-basis=&#34;569px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_2.jpg&#34;
	width=&#34;980&#34;
	height=&#34;384&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_2_hu5207a37ecf57f6d53a87610985ecd525_42567_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_2_hu5207a37ecf57f6d53a87610985ecd525_42567_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建VM2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;255&#34;
		data-flex-basis=&#34;612px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_3.jpg&#34;
	width=&#34;976&#34;
	height=&#34;377&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_3_hu818554a2c061c16c46b58c750f4a8a9e_38874_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_3_hu818554a2c061c16c46b58c750f4a8a9e_38874_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建VM3&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;258&#34;
		data-flex-basis=&#34;621px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_4.jpg&#34;
	width=&#34;968&#34;
	height=&#34;722&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_4_hua3de318894050389dc215e30d9e9a2d3_73195_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_4_hua3de318894050389dc215e30d9e9a2d3_73195_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建VM4&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;134&#34;
		data-flex-basis=&#34;321px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;创建完成后，在虚拟机设置中，禁用安全启动。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_5.jpg&#34;
	width=&#34;1046&#34;
	height=&#34;437&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_5_hudb25b25ea79ca88e83daf9bd3fa89894_74442_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/create_vm_5_hudb25b25ea79ca88e83daf9bd3fa89894_74442_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建VM5&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;239&#34;
		data-flex-basis=&#34;574px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;启动运行&#34;&gt;
    &lt;a href=&#34;#%e5%90%af%e5%8a%a8%e8%bf%90%e8%a1%8c&#34;&gt;#&lt;/a&gt;
    启动运行
&lt;/h3&gt;&lt;p&gt;双击虚拟机，启动运行。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/run_1.jpg&#34;
	width=&#34;1280&#34;
	height=&#34;1045&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/run_1_hub46b25eb8090d374f1ca54c3cd96482d_117377_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/run_1_hub46b25eb8090d374f1ca54c3cd96482d_117377_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;运行1&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;122&#34;
		data-flex-basis=&#34;293px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;此时，鼠标可能无法使用，请使用 Tab键、方向键和回车键操作。&lt;/p&gt;
&lt;p&gt;顺利进入系统。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/run_2.jpg&#34;
	width=&#34;1275&#34;
	height=&#34;1051&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/run_2_hu38ac18eb28a1d2b304ac25a3f3e99df2_80291_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/run_2_hu38ac18eb28a1d2b304ac25a3f3e99df2_80291_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;运行2&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;121&#34;
		data-flex-basis=&#34;291px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;使用-winntsetup-快速制作-windows-l0-镜像&#34;&gt;
    &lt;a href=&#34;#%e4%bd%bf%e7%94%a8-winntsetup-%e5%bf%ab%e9%80%9f%e5%88%b6%e4%bd%9c-windows-l0-%e9%95%9c%e5%83%8f&#34;&gt;#&lt;/a&gt;
    使用 WinNTSetup 快速制作 Windows L0 镜像
&lt;/h2&gt;&lt;p&gt;下载 &lt;a class=&#34;link&#34; href=&#34;https://msfn.org/board/topic/149612-winntsetup-v533/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;WinNTSetup&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id=&#34;vhdx-准备&#34;&gt;
    &lt;a href=&#34;#vhdx-%e5%87%86%e5%a4%87&#34;&gt;#&lt;/a&gt;
    vhdx 准备
&lt;/h3&gt;&lt;p&gt;参考之前步骤，完成虚拟磁盘的创建和分区。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%88%9b%e5%bb%ba-vdhx&#34; &gt;创建 vdhx&lt;/a&gt;，大小建议70G以上。&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#%e5%88%86%e5%8c%ba&#34; &gt;分区&lt;/a&gt;，卷标不用指定。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;制作过程中自动禁用虚拟磁盘扩充到最大&#34;&gt;
    &lt;a href=&#34;#%e5%88%b6%e4%bd%9c%e8%bf%87%e7%a8%8b%e4%b8%ad%e8%87%aa%e5%8a%a8%e7%a6%81%e7%94%a8%e8%99%9a%e6%8b%9f%e7%a3%81%e7%9b%98%e6%89%a9%e5%85%85%e5%88%b0%e6%9c%80%e5%a4%a7&#34;&gt;#&lt;/a&gt;
    制作过程中自动禁用虚拟磁盘扩充到最大
&lt;/h3&gt;&lt;p&gt;在目录 &lt;code&gt;WinNTSetup\RegTweaks\Win10&lt;/code&gt; 下创建 &lt;code&gt;disable-vdisk-expand.reg&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;这个目录是安装过程中修改注册表的，可以利用此特性预置很多配置。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-reg&#34; data-lang=&#34;reg&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Windows Registry Editor Version 5.00
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;HKEY_LOCAL_MACHINE&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;\SYSTEM\CurrentControlSet\Services\FsDepends\Parameters]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;&amp;#34;VirtualDiskExpandOnMount&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;dword&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;00000004&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;使用-winntsetup-创建-l0-镜像&#34;&gt;
    &lt;a href=&#34;#%e4%bd%bf%e7%94%a8-winntsetup-%e5%88%9b%e5%bb%ba-l0-%e9%95%9c%e5%83%8f&#34;&gt;#&lt;/a&gt;
    使用 WinNTSetup 创建 L0 镜像
&lt;/h3&gt;&lt;p&gt;打开 &lt;code&gt;WinNTSetup&lt;/code&gt;。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;选择 Windows 安装镜像 ISO，这里以 LSTC 为例。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;引导驱动器&lt;/code&gt;选择虚拟磁盘的ESP分区，就是 FAT32 300MB 那个。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;系统驱动器&lt;/code&gt;选择虚拟磁盘最大的那个分区，NTFS 那个。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;优化调整&lt;/code&gt;里，&lt;code&gt;注册表调整&lt;/code&gt;选择&lt;code&gt;Win10&lt;/code&gt;，其余选项按需调整。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/winntsetup.jpg&#34;
	width=&#34;1706&#34;
	height=&#34;661&#34;
	srcset=&#34;http://localhost:1313/p/2024/01/cloud-firmware-hyperv/winntsetup_hu0cc3b84ada6d22588bc86ac11ae72376_213059_480x0_resize_q75_box.jpg 480w, http://localhost:1313/p/2024/01/cloud-firmware-hyperv/winntsetup_hu0cc3b84ada6d22588bc86ac11ae72376_213059_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;winntsetup&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;258&#34;
		data-flex-basis=&#34;619px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;最后点击 &lt;code&gt;安装&lt;/code&gt;，会提示&lt;code&gt;不能选择VHD作为引导驱动器&lt;/code&gt;，点击&lt;code&gt;确定&lt;/code&gt;继续即可。&lt;/p&gt;
&lt;p&gt;安装结束会提示&lt;code&gt;重启&lt;/code&gt;，就不用重启了。&lt;/p&gt;
&lt;p&gt;最后分离 VHD，一个 Windows 的 L0 镜像就做好了。&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
